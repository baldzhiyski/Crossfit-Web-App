<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Workout-Details-Page</title>

    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/workout-details.css}" rel="stylesheet"/>
    <link th:href="@{/css/navbar.css}" rel="stylesheet"/>
    <link th:href="@{/css/footer.css}" rel="stylesheet"/>
    <link href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
          integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm"
          crossorigin="anonymous" rel="stylesheet"/>
</head>
<body>
<nav th:replace = "~{fragments/navbar::nav}"></nav>
<div class="container">
    <div class="row" >
        <!-- Left Side: Training Description Card -->
        <div class="col-md-12 mt-2 mb-2" th:object="${currentTrainingDto}">
            <div class="card mb-7">
                <img th:src="@{*{imageUrl}}" class="card-img-top" alt="Training Image">
                <div class="card-body bg-dark" style="color:white;">
                    <h5 class="card-title" th:text="*{trainingType}"></h5>
                    <p class="card-text" th:text="*{description}"></p>
                    <p class="card-text"><small>Level of the training: <span class="text-danger" th:text="*{level}">Advanced</span></small></p>
                </div>
            </div>
        </div>


        <!-- Right Side: Comments Section -->
        <div class="col-md-12">
            <div class="be-comment-block" >
                <h1 class="comments-title" th:text="'Comments: ' + ${displayedCommentsForTheSectionDtos.size()}"></h1>

                <!-- Comment 1 -->
                <div class="d-flex flex-start mb-4" th:each="comment : ${displayedCommentsForTheSectionDtos}">
                    <img class="rounded-circle shadow-1-strong me-3"
                         src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(32).webp" alt="avatar" width="65"
                         height="65" />
                    <div class="card w-100">
                        <div class="card-body p-4">
                            <div class="">
                                <h5 th:text="${comment.author.firstName} + ' ' + ${comment.author.lastName}">Johny Cash</h5>
                                <p class="small" th:text="${comment.date}"> Date of the comment</p>
                                <p th:text="${comment.text}">
                                </p>
                                <div class="like-dislike-buttons">
                                    <form th:action="@{/workouts/details/{trainingType}/comment/like/{commentId}(commentId=${comment.id},trainingType=${trainingType})}" method="post">
                                        <button type="submit">
                                            <i class="fas fa-thumbs-up me-1"></i><span class="likes" th:text="${comment.likes}">132</span>
                                        </button>
                                    </form>
                                    <form th:action="@{/workouts/details/{trainingType}/comment/dislike/{commentId}(commentId=${comment.id},trainingType=${trainingType})}" method="post">
                                        <button type="submit">
                                            <i class="fas fa-thumbs-down me-1"></i><span class="dislikes" th:text="${comment.dislikes}">15</span>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Comment Form -->
        <!-- Comment Form -->
        <h5 class="mt-3" th:if="${isAuthenticated}">Add Comment Section</h5>
        <form class="form-block" th:if="${isAuthenticated}" th:method="POST"
              th:action="@{/workouts/details/comment/{trainingsType}(trainingsType=${trainingType})}">
            <div class="row mt-2">
                <div class="col-xl-12">
                    <div class="form-group">
                            <textarea class="form-input" id="description" name="description" placeholder="Add your comment here"></textarea>
                    </div>
                </div>
                <div class="col-xs-12 mb-2">
                    <button class="btn btn-primary pull-right" type="submit">Submit</button>
                </div>
            </div>
        </form>
    </div>
</div>
<footer th:replace="~{fragments/footer::footer}"></footer>
</body>
</html>